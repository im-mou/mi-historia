(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1179:function(e,t){},305:function(e,t,a){a(306),e.exports=a(1179)},306:function(e,t,a){a(307),a(633)},307:function(e,t,a){window._=a(308),window.axios=a(25),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a(326)},326:function(e,t,a){"use strict";a.r(t);var n=a(4);Object(n.A)({palette:{themePrimary:"#304e60",themeLighterAlt:"#f4f7f9",themeLighter:"#d3dfe6",themeLight:"#b0c4d0",themeTertiary:"#708ea0",themeSecondary:"#416074",themeDarkAlt:"#2c4657",themeDark:"#253c4a",themeDarker:"#1b2c36",neutralLighterAlt:"#eee8db",neutralLighter:"#eae4d8",neutralLight:"#e1dbcf",neutralQuaternaryAlt:"#d1ccc1",neutralQuaternary:"#c8c3b8",neutralTertiaryAlt:"#c0bbb1",neutralTertiary:"#c2c2c2",neutralSecondary:"#858585",neutralPrimaryAlt:"#4b4b4b",neutralPrimary:"#333333",neutralDark:"#272727",black:"#1d1d1d",white:"#f5efe1"}})},633:function(e,t,a){"use strict";a.r(t);a(327);var n=a(188),r=a.n(n),o=a(0),i=a.n(o),s=function(e){return i.a.createElement("div",null,i.a.createElement("div",{className:"page-header"},i.a.createElement("span",{className:"ms-fontSize-24"},e.title,i.a.createElement("br",null),i.a.createElement("small",{className:"ms-fontSize-16"},e.subtitle))))},l=a(665),u=a(675),c={childrenGap:20},d=function(){return i.a.createElement(l.a,{className:"component",horizontal:!0,horizontalAlign:"center",verticalAlign:"center",tokens:c},i.a.createElement(u.a,{className:"ms-depth-4",href:"/contar-mi-historia",secondaryText:"Redactar un escrito para contar tus experiencias"},"Quiero contar mi historia"),i.a.createElement(u.a,{className:"ms-depth-4",href:"/responder-a-preguntas",secondaryText:"Participar en la entrevista y reponder a pregutas"},"Quiero responder a preguntas"))},y=a(15),p=a.n(y),h=a(9),m=a.n(h),f=a(25),b=a.n(f),k=a(662),x=a(32),g=a(666),v=a(4),S=Object(v.C)({padding:2,selectors:{"& > .ms-Shimmer-container":{margin:"10px 0"}}}),E=function(){return i.a.createElement(g.a,{className:S},i.a.createElement(k.a,{shimmerElements:[{type:x.a.line,width:"15%"},{type:x.a.gap,width:"51%"},{type:x.a.line,height:24,width:"10%"},{type:x.a.gap,width:"1%"},{type:x.a.line,height:24,width:"18%"},{type:x.a.gap,width:"1%"},{type:x.a.line,height:24,width:"5%"}]}),i.a.createElement(k.a,{shimmerElements:[{type:x.a.line,height:45}]}),i.a.createElement(k.a,{shimmerElements:[{type:x.a.line,height:200}]}))},C=function(){var e={type:x.a.line,height:30,width:"45%"},t={type:x.a.gap,width:"5%"};return i.a.createElement(g.a,{className:S},i.a.createElement(k.a,{shimmerElements:[e,t,e]}),i.a.createElement(k.a,{shimmerElements:[e,t,e]}),i.a.createElement(k.a,{shimmerElements:[e,t,e]}),i.a.createElement(k.a,{shimmerElements:[e,t,e]}),i.a.createElement(k.a,{shimmerElements:[{type:x.a.line,height:30,width:"20%"},{type:x.a.gap,width:"80%"}]}))},w=a(294),P=a(671),O=a(10);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var A=function(e){return i.a.createElement(P.a,j({},e,{messageBarType:O.a.success,isMultiline:!1}),e.children)},L=function(e){return i.a.createElement(P.a,j({},e,{messageBarType:O.a.error,isMultiline:!1,dismissButtonAriaLabel:"Close"}),e.children)},M=a(52),T=a(290),B=a.n(T),F={SUCCESS:"Tu historia ha sido enviada para una revisión antes de ser publicada! Muchas gracias por compartir. Siempre estamos aquí para escuharte."},q={SUCCESS:"Tus respuestas han sido enviadas para una revisión antes de ser publicadas! Muchas gracias por compartir. Siempre estamos aquí para escuharte."},R=a(669),I=a(674),N=a(295),G=a(660),D=a(672),z=a(291),H=a.n(z),Q=a(292),V=a.n(Q),U=a(293),J=a.n(U)()(V.a),K={childrenGap:10},Z={iconName:"Settings"},W=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"controlBar-alert"},e.parentState.published?i.a.createElement(A,{isMultiline:!0},e.successText):""),i.a.createElement(l.a,{horizontal:!0,minHeight:"50",horizontalAlign:"space-between"},i.a.createElement(l.a,{horizontalAlign:"start",verticalAlign:"bottom",tokens:K},i.a.createElement(R.a,{label:" ",onText:"Anonymous",offText:"Anonymous",checked:!!e.parentState.anonymous,onChange:e.toggleSwitch})),i.a.createElement(l.a,{horizontal:!0,horizontalAlign:"end",verticalAlign:"center",tokens:K},i.a.createElement(I.a,{variant:"small",styles:{root:{color:"#666666"}}},e.parentState.lastSaved,i.a.createElement(H.a,{date:e.parentState.lastSavedTime,formatter:J})),i.a.createElement(N.a,{text:"Guardar",onClick:e.handleSave,allowDisabledFocus:!0}),i.a.createElement(G.a,{text:"Guardar y Publicar",onClick:e.handlePublish,allowDisabledFocus:!0}),i.a.createElement(D.a,{iconProps:Z,menuProps:e.menuProps}))))};function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t,a){return t&&$(e.prototype,t),a&&$(e,a),e}function te(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(e){var a,n;return X(this,t),n=""===(a=te(this,ae(t).call(this,e))).props.body?M.EditorState.createEmpty():M.EditorState.createWithContent(Object(M.convertFromRaw)(JSON.parse(a.props.body))),a.state={editorState:n,isFocused:!1},a.focus=function(){a.refs.editor.focus(),a.setState({isFocused:!0})},a.blur=function(){a.setState({isFocused:!1})},a.onChange=function(e){a.setState({editorState:e}),a.props.onChange(e)},a.handleKeyCommand=function(e){return a._handleKeyCommand(e)},a.onTab=function(e){return a._onTab(e)},a.toggleBlockType=function(e){return a._toggleBlockType(e)},a.toggleInlineStyle=function(e){return a._toggleInlineStyle(e)},a}return ne(t,e),ee(t,[{key:"_handleKeyCommand",value:function(e){var t=this.state.editorState,a=M.RichUtils.handleKeyCommand(t,e);return!!a&&(this.onChange(a),!0)}},{key:"_onTab",value:function(e){this.onChange(M.RichUtils.onTab(e,this.state.editorState,4))}},{key:"_toggleBlockType",value:function(e){this.onChange(M.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(M.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"render",value:function(){var e=this.state.editorState,t="RichEditor-editor",a=e.getCurrentContent();return a.hasText()||"unstyled"!==a.getBlockMap().first().getType()&&(t+=" RichEditor-hidePlaceholder"),i.a.createElement("div",{className:"RichEditor-root"},this.state.isFocused?i.a.createElement(ce,{editorState:e,onToggle:this.toggleInlineStyle}):"",i.a.createElement("div",{className:t,onBlur:this.blur,onClick:this.focus},i.a.createElement(M.Editor,{blockStyleFn:se,customStyleMap:ie,editorState:e,handleKeyCommand:this.handleKeyCommand,onChange:this.onChange,placeholder:this.state.isFocused?"":"Escribe tu historia...",ref:"editor",spellCheck:!0})))}}]),t}(i.a.Component),ie={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:20,padding:10}};function se(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var le=function(e){function t(){var e;return X(this,t),(e=te(this,ae(t).call(this))).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return ne(t,e),ee(t,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),i.a.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),t}(i.a.Component),ue=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"}],ce=function(e){var t=e.editorState.getCurrentInlineStyle();return i.a.createElement("div",{className:"RichEditor-controls"},ue.map((function(a){return i.a.createElement(le,{key:a.label,active:t.has(a.style),label:a.label,onToggle:e.onToggle,style:a.style})})))},de=oe;function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function he(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke={items:[{key:"removePost",text:"Eliminar Historia",iconProps:{iconName:"Delete"}}],directionalHintFixed:!0};Object(w.a)();var xe=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=me(t).call(this,e))||"object"!==ye(r)&&"function"!=typeof r?fe(n):r).handleSave=a.handleSave.bind(fe(a)),a.handlePublish=a.handlePublish.bind(fe(a)),a.handleRequest=a.handleRequest.bind(fe(a)),a.handleInputChange=a.handleInputChange.bind(fe(a)),a.toggleSwitch=a.toggleSwitch.bind(fe(a)),a.hasErrorFor=a.hasErrorFor.bind(fe(a)),a.renderErrorFor=a.renderErrorFor.bind(fe(a)),a.handleEditorChange=a.handleEditorChange.bind(fe(a)),a.getBodydata=a.getBodydata.bind(fe(a)),a.state={uuid:a.props.uuid,title:a.props.title,body:a.props.body,anonymous:a.props.anonymous,published:a.props.published,lastSaved:a.props.lastSaved,lastSavedTime:a.props.lastSavedTime,errors:[],dataLoaded:a.props.dataLoaded},a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){var e=this,t="",a="";b.a.get("/api/historia/"+this.state.uuid).then((function(n){null!==n.data.story&&(t=n.data.story.bodyjson),null!==n.data.title&&(a=n.data.title),e.setState({title:a,body:t,anonymous:n.data.anonymous,published:n.data.published,dataLoaded:!0})})).catch((function(t){t.response&&e.setState({errors:t.response.data.errors})}))}},{key:"handleSave",value:function(){this.handleRequest("guardar","Último guardado: ")}},{key:"handlePublish",value:function(){this.handleRequest("publicar")}},{key:"handleRequest",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.getBodydata(this.state.body),r={title:this.state.title,body:n.html,bodyjson:n.json,anonymous:this.state.anonymous,published:this.state.published,uuid:this.state.uuid,action:"publicar"===e};b.a.post("/api/historia/"+e,r).then((function(n){t.setState({lastSaved:a,lastSavedTime:new Date(n.data.msg),errors:[],published:"publicar"===e||t.state.published})})).catch((function(e){e.response&&t.setState({errors:e.response.data.errors})}))}},{key:"handleInputChange",value:function(e){var t,a=this.state.errors;a[event.target.name]="",this.setState((pe(t={},event.target.name,e.target.value),pe(t,"lastSaved","Hay cambios sin guardar"),pe(t,"lastSavedTime",null),pe(t,"errors",a),t))}},{key:"getBodydata",value:function(e){var t,a=Object(M.convertToRaw)(e.getCurrentContent()),n=JSON.stringify(a);t=JSON.parse(n).blocks.map((function(e){return""===e.text.trim()}));var r=_.uniq(t);return 1===r.length&&r[0]?{html:"",json:""}:{html:B()(a),json:n}}},{key:"handleEditorChange",value:function(e){var t=this.state.errors;t.body="",this.setState({body:e,lastSaved:"Hay cambios sin guardar",lastSavedTime:null,errors:t})}},{key:"toggleSwitch",value:function(e){this.setState({anonymous:!this.state.anonymous})}},{key:"hasErrorFor",value:function(e){return!!this.state.errors[e]}},{key:"renderErrorFor",value:function(e){if(this.hasErrorFor(e))return i.a.createElement(L,null,this.state.errors[e][0])}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.dataLoaded?i.a.createElement(i.a.Fragment,null,i.a.createElement(W,{parentState:this.state,menuProps:ke,toggleSwitch:this.toggleSwitch,handleSave:this.handleSave,handlePublish:this.handlePublish,successText:F.SUCCESS}),i.a.createElement("div",{className:"big-input-container"},i.a.createElement("input",{type:"text",className:"form-control big-input",name:"title",autoComplete:"off","aria-describedby":"tituloHelp",placeholder:"Título de tu escrito",onChange:this.handleInputChange,value:this.state.title}),this.renderErrorFor("title")),i.a.createElement(de,{onChange:this.handleEditorChange,body:this.state.body}),this.renderErrorFor("body")):i.a.createElement(E,null))}}])&&he(a.prototype,n),r&&he(a,r),t}(i.a.Component);xe.defaultProps={uuid:_.last((new URL(window.location.href)+"").split("/")),title:"",body:"",anonymous:!1,published:!1,lastSaved:"",lastSavedTime:null,dataLoaded:!1},xe.propTypes={uuid:m.a.string,title:m.a.string,body:m.a.string,anonymous:m.a.bool,published:m.a.bool,lastSaved:m.a.string,lastSavedTime:m.a.string,dataLoaded:m.a.bool};var ge=xe;function ve(e,t,a,n,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Se(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){ve(o,n,r,i,s,"next",e)}function s(e){ve(o,n,r,i,s,"throw",e)}i(void 0)}))}}function Ee(){return(Ee=Se(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/searchUser?query=".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Se(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/respuestas/".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Se(p.a.mark((function e(t){var a,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.code,e.next=3,b()({url:"/api/respuestas/".concat(a),method:"post",data:n});case 3:return r=e.sent,o=r.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return(Pe=Se(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/mis-datos");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Se(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.code,e.next=3,b()({url:"/api/mis-datos/guardar",method:"post",data:a});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je={getPosts:function(e){return Ee.apply(this,arguments)},getQuestions:function(e){return Ce.apply(this,arguments)},saveAnswers:function(e){return we.apply(this,arguments)},getUserData:function(){return Pe.apply(this,arguments)},saveUserData:function(e){return Oe.apply(this,arguments)}},Ae=a(664);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Te(e,t,a,n,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Be(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Te(o,n,r,i,s,"next",e)}function s(e){Te(o,n,r,i,s,"throw",e)}i(void 0)}))}}function Fe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne={items:[{key:"removePost",text:"Eliminar Historia",iconProps:{iconName:"Delete"}}],directionalHintFixed:!0},Ge=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=qe(t).call(this,e))||"object"!==Le(r)&&"function"!=typeof r?Re(n):r).handleSave=a.handleSave.bind(Re(a)),a.handlePublish=a.handlePublish.bind(Re(a)),a.handleRequest=a.handleRequest.bind(Re(a)),a.handleInputChange=a.handleInputChange.bind(Re(a)),a.toggleSwitch=a.toggleSwitch.bind(Re(a)),a.hasErrorFor=a.hasErrorFor.bind(Re(a)),a.renderErrorFor=a.renderErrorFor.bind(Re(a)),a.state={loading:a.props.loading,uuid:a.props.uuid,anonymous:a.props.anonymous,published:a.props.published,lastSaved:a.props.lastSaved,questionsList:a.props.questionsList,indexes:a.props.indexes,errors:[]},a}var a,n,r,o,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.getQuestions(this.props.uuid)}},{key:"handleSave",value:function(){this.handleRequest("guardar","Último guardado: ")}},{key:"handlePublish",value:function(){var e=this;this.setState({published:!0},(function(){e.handleRequest("publicar")}))}},{key:"handleRequest",value:(u=Be(p.a.mark((function e(t){var a,n,r,o,i=this,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"",n=this.state.indexes.map((function(e){return{question_id:e.id,body:i.state[e.key]}})),r={uuid:this.state.uuid,anonymous:this.state.anonymous,published:this.state.published,answers:n},e.prev=3,e.next=6,je.saveAnswers({url:t,code:r});case 6:o=e.sent,this.setState({lastSaved:a+o.msg,errors:[]}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response&&this.setState({errors:e.t0.response.data.errors});case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return u.apply(this,arguments)})},{key:"handleInputChange",value:function(e){var t;this.setState((_e(t={},event.target.name,e.target.value),_e(t,"lastSaved","Hay cambios sin guardar"),t))}},{key:"toggleSwitch",value:function(e){this.setState({anonymous:!this.state.anonymous})}},{key:"getQuestions",value:(s=Be(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,je.getQuestions(t);case 3:e.t1=e.sent,e.t0.updateQuestionsData.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"saveQuestions",value:(o=Be(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,je.saveQuestions();case 3:e.t1=e.sent,e.t0.saveQuestionsData.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"updateQuestionsData",value:function(e){var t=e.questions,a=e.post,n=this.generateQuestionStateEls({questions:t,post:a}),r=n.questionStateEls,o=n.indexes;this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(a),!0).forEach((function(t){_e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({loading:!1,questionsList:t},r,{indexes:o,anonymous:a.anonymous,published:a.published}))}},{key:"generateQuestionStateEls",value:function(e){var t=e.questions,a=e.post,n=[],r=[];return a.answers.length?a.answers.map((function(e){n["question_"+e.pivot.question_id]=e.pivot.body,r.push({key:"question_"+e.pivot.question_id,id:e.pivot.question_id})})):t.map((function(e){n["question_"+e.id]="",r.push({key:"question_"+e.id,id:e.id})})),{questionStateEls:n,indexes:r}}},{key:"hasErrorFor",value:function(e){return!!this.state.errors[e]}},{key:"renderErrorFor",value:function(e){if(this.hasErrorFor(e))return i.a.createElement(L,null,this.state.errors[e][0])}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.renderErrorFor("uuid"),this.renderErrorFor("anonymous"),this.renderErrorFor("published"),this.renderErrorFor("answers"),i.a.createElement(W,{parentState:this.state,menuProps:Ne,toggleSwitch:this.toggleSwitch,handleSave:this.handleSave,handlePublish:this.handlePublish,successText:q.SUCCESS}),i.a.createElement(l.a,null,this.state.questionsList.map((function(t,a){return i.a.createElement(Ae.a,{key:a,multiline:!0,rows:4,styles:{root:{paddingTop:10,paddingBottom:10},field:{fontSize:18,fontFamily:"Georgia"}},label:t.body,name:"question_".concat(t.id),onChange:e.handleInputChange,value:e.state["question_"+t.id],placeholder:"Escribe aqui tu respuesta..."})}))))}}])&&Fe(a.prototype,n),r&&Fe(a,r),t}(i.a.Component);Ge.defaultProps={loading:!0,uuid:_.last((new URL(window.location.href)+"").split("/")),anonymous:!1,published:!1,lastSaved:"",questionsList:[],indexes:[]},Ge.propTypes={loading:m.a.bool,uuid:m.a.string,anonymous:m.a.bool,published:m.a.bool,lastSaved:m.a.string,questionsList:m.a.array,indexes:m.a.array};var De=Ge,ze=[{key:"Barcelona",text:"Barcelona"},{key:"L’Hospitalet de Llobregat",text:"L’Hospitalet de Llobregat"},{key:"Badalona",text:"Badalona"},{key:"Cornellà",text:"Cornellà"},{key:"Sabadell",text:"Sabadell"},{key:"Terrassa",text:"Terrassa"},{key:"Vilanova i la Geltrú",text:"Vilanova i la Geltrú"},{key:"Ávila",text:"Ávila"},{key:"A Coruña",text:"A Coruña"},{key:"Albacete",text:"Albacete"},{key:"Alcalá de Guadaira",text:"Alcalá de Guadaira"},{key:"Alcalá de Henares",text:"Alcalá de Henares"},{key:"Alcoy",text:"Alcoy"},{key:"Alcántara",text:"Alcántara"},{key:"Alcázar de San Juan",text:"Alcázar de San Juan"},{key:"Algeciras",text:"Algeciras"},{key:"Alicante",text:"Alicante"},{key:"Almadén",text:"Almadén"},{key:"Almendralejo",text:"Almendralejo"},{key:"Almería",text:"Almería"},{key:"Alzira",text:"Alzira"},{key:"Andújar",text:"Andújar"},{key:"Antequera",text:"Antequera"},{key:"Aranjuez",text:"Aranjuez"},{key:"Arcos de la Frontera",text:"Arcos de la Frontera"},{key:"Arucas",text:"Arucas"},{key:"Astorga",text:"Astorga"},{key:"Avilés",text:"Avilés"},{key:"Badajoz",text:"Badajoz"},{key:"Barakaldo",text:"Barakaldo"},{key:"Baza",text:"Baza"},{key:"Bilbao",text:"Bilbao"},{key:"Bujalance",text:"Bujalance"},{key:"Burgos",text:"Burgos"},{key:"Cabañaquinta",text:"Cabañaquinta"},{key:"Cabra",text:"Cabra"},{key:"Calahorra",text:"Calahorra"},{key:"Cangas de Narcea",text:"Cangas de Narcea"},{key:"Caravaca",text:"Caravaca"},{key:"Carballo",text:"Carballo"},{key:"Carmona",text:"Carmona"},{key:"Cartagena",text:"Cartagena"},{key:"Castellón de la Plana",text:"Castellón de la Plana"},{key:"Chiclana de la Frontera",text:"Chiclana de la Frontera"},{key:"Cieza",text:"Cieza"},{key:"Ciudad Real",text:"Ciudad Real"},{key:"Ciudad Rodrigo",text:"Ciudad Rodrigo"},{key:"Covadonga",text:"Covadonga"},{key:"Coín",text:"Coín"},{key:"Cuenca",text:"Cuenca"},{key:"Cáceres",text:"Cáceres"},{key:"Cádiz",text:"Cádiz"},{key:"Córdoba",text:"Córdoba"},{key:"Don Benito",text:"Don Benito"},{key:"Donostia–San Sebastián",text:"Donostia–San Sebastián"},{key:"Dos Hermanas",text:"Dos Hermanas"},{key:"Ecija",text:"Ecija"},{key:"Eibar",text:"Eibar"},{key:"El Escorial",text:"El Escorial"},{key:"El Puerto de Santa María",text:"El Puerto de Santa María"},{key:"Elche",text:"Elche"},{key:"Elda",text:"Elda"},{key:"Ferrol",text:"Ferrol"},{key:"Funes",text:"Funes"},{key:"Gandía",text:"Gandía"},{key:"Getafe",text:"Getafe"},{key:"Getxo",text:"Getxo"},{key:"Gijón",text:"Gijón"},{key:"Girona",text:"Girona"},{key:"Granada",text:"Granada"},{key:"Granollers",text:"Granollers"},{key:"Guadalajara",text:"Guadalajara"},{key:"Guadalupe",text:"Guadalupe"},{key:"Guadix",text:"Guadix"},{key:"Guernica",text:"Guernica"},{key:"Hellín",text:"Hellín"},{key:"Huelva",text:"Huelva"},{key:"Huesca",text:"Huesca"},{key:"Irun",text:"Irun"},{key:"Jaca",text:"Jaca"},{key:"Jaén",text:"Jaén"},{key:"Jerez de la Frontera",text:"Jerez de la Frontera"},{key:"Jumilla",text:"Jumilla"},{key:"La Línea",text:"La Línea"},{key:"La Orotava",text:"La Orotava"},{key:"Las Palmas",text:"Las Palmas"},{key:"Lebrija",text:"Lebrija"},{key:"León",text:"León"},{key:"Linares",text:"Linares"},{key:"Lleida",text:"Lleida"},{key:"Llívia",text:"Llívia"},{key:"Logroño",text:"Logroño"},{key:"Lora del Río",text:"Lora del Río"},{key:"Lorca",text:"Lorca"},{key:"Luarca",text:"Luarca"},{key:"Lucena",text:"Lucena"},{key:"Lugo",text:"Lugo"},{key:"Madrid",text:"Madrid"},{key:"Manresa",text:"Manresa"},{key:"Marchena",text:"Marchena"},{key:"Martos",text:"Martos"},{key:"Mataró",text:"Mataró"},{key:"Maó",text:"Maó"},{key:"Melilla",text:"Melilla"},{key:"Mieres",text:"Mieres"},{key:"Miranda de Ebro",text:"Miranda de Ebro"},{key:"Mondoñedo",text:"Mondoñedo"},{key:"Monforte de Lemos",text:"Monforte de Lemos"},{key:"Montilla",text:"Montilla"},{key:"Morón de la Frontera",text:"Morón de la Frontera"},{key:"Motril",text:"Motril"},{key:"Murcia",text:"Murcia"},{key:"Málaga",text:"Málaga"},{key:"Mérida",text:"Mérida"},{key:"Orihuela",text:"Orihuela"},{key:"Ortigueira",text:"Ortigueira"},{key:"Osuna",text:"Osuna"},{key:"Ourense",text:"Ourense"},{key:"Oviedo",text:"Oviedo"},{key:"Palencia",text:"Palencia"},{key:"Palma",text:"Palma"},{key:"Pamplona",text:"Pamplona"},{key:"Peñarroya-Pueblonuevo",text:"Peñarroya-Pueblonuevo"},{key:"Plasencia",text:"Plasencia"},{key:"Pola de Siero",text:"Pola de Siero"},{key:"Ponferrada",text:"Ponferrada"},{key:"Pontevedra",text:"Pontevedra"},{key:"Portugalete",text:"Portugalete"},{key:"Priego de Córdoba",text:"Priego de Córdoba"},{key:"Puente-Genil",text:"Puente-Genil"},{key:"Puerto Real",text:"Puerto Real"},{key:"Puertollano",text:"Puertollano"},{key:"Requena",text:"Requena"},{key:"Reus",text:"Reus"},{key:"Ribeira",text:"Ribeira"},{key:"Roncesvalles",text:"Roncesvalles"},{key:"Ronda",text:"Ronda"},{key:"Sagunto",text:"Sagunto"},{key:"Salamanca",text:"Salamanca"},{key:"San Fernando",text:"San Fernando"},{key:"San Ildefonso",text:"San Ildefonso"},{key:"San Martín del Rey Aurelio",text:"San Martín del Rey Aurelio"},{key:"Sanlúcar de Barrameda",text:"Sanlúcar de Barrameda"},{key:"Santa Coloma de Gramenet",text:"Santa Coloma de Gramenet"},{key:"Santa Cruz de Tenerife",text:"Santa Cruz de Tenerife"},{key:"Santander",text:"Santander"},{key:"Santiago de Compostela",text:"Santiago de Compostela"},{key:"Santurtzi",text:"Santurtzi"},{key:"Segovia",text:"Segovia"},{key:"Sestao",text:"Sestao"},{key:"Sevilla",text:"Sevilla"},{key:"Simancas",text:"Simancas"},{key:"Soria",text:"Soria"},{key:"Sueca",text:"Sueca"},{key:"Talavera de la Reina",text:"Talavera de la Reina"},{key:"Tarragona",text:"Tarragona"},{key:"Telde",text:"Telde"},{key:"Teruel",text:"Teruel"},{key:"Tineo",text:"Tineo"},{key:"Toledo",text:"Toledo"},{key:"Tomelloso",text:"Tomelloso"},{key:"Toro",text:"Toro"},{key:"Torrelavega",text:"Torrelavega"},{key:"Torrent",text:"Torrent"},{key:"Tortosa",text:"Tortosa"},{key:"Trujillo",text:"Trujillo"},{key:"Úbeda",text:"Úbeda"},{key:"Utrera",text:"Utrera"},{key:"Valdepeñas",text:"Valdepeñas"},{key:"Valencia",text:"Valencia"},{key:"Valladolid",text:"Valladolid"},{key:"Vic",text:"Vic"},{key:"Vigo",text:"Vigo"},{key:"Vilagarcía de Arousa",text:"Vilagarcía de Arousa"},{key:"Vilalba",text:"Vilalba"},{key:"Villanueva de la Serena",text:"Villanueva de la Serena"},{key:"Villarreal",text:"Villarreal"},{key:"Villarrobledo",text:"Villarrobledo"},{key:"Villaviciosa",text:"Villaviciosa"},{key:"Villena",text:"Villena"},{key:"Vitoria-Gasteiz",text:"Vitoria-Gasteiz"},{key:"Yecla",text:"Yecla"},{key:"Zamora",text:"Zamora"},{key:"Zaragoza",text:"Zaragoza"}],He=[{key:"España",text:"España"},{key:"Pakistán",text:"Pakistán"},{key:"India",text:"India"},{key:"Bangladesh",text:"Bangladesh"},{key:"Afganistán",text:"Afganistán"},{key:"Albania",text:"Albania"},{key:"Alemania",text:"Alemania"},{key:"Andorra",text:"Andorra"},{key:"Angola",text:"Angola"},{key:"Anguilla",text:"Anguilla"},{key:"Antártida",text:"Antártida"},{key:"Antigua y Barbuda",text:"Antigua y Barbuda"},{key:"Antillas Holandesas",text:"Antillas Holandesas"},{key:"Arabia Saudita",text:"Arabia Saudita"},{key:"Argelia",text:"Argelia"},{key:"Argentina",text:"Argentina"},{key:"Armenia",text:"Armenia"},{key:"Aruba",text:"Aruba"},{key:"Australia",text:"Australia"},{key:"Austria",text:"Austria"},{key:"Azerbaiján",text:"Azerbaiján"},{key:"Bahamas",text:"Bahamas"},{key:"Bahrain",text:"Bahrain"},{key:"Barbados",text:"Barbados"},{key:"Bélgica",text:"Bélgica"},{key:"Belice",text:"Belice"},{key:"Benin",text:"Benin"},{key:"Bhutan",text:"Bhutan"},{key:"Bielorusia",text:"Bielorusia"},{key:"Bolivia",text:"Bolivia"},{key:"Bosnia Herzegovina",text:"Bosnia Herzegovina"},{key:"Botswana",text:"Botswana"},{key:"Brasil",text:"Brasil"},{key:"Brunei",text:"Brunei"},{key:"Bulgaria",text:"Bulgaria"},{key:"Burkina Faso",text:"Burkina Faso"},{key:"Burundi",text:"Burundi"},{key:"Cabo Verde",text:"Cabo Verde"},{key:"Camboya",text:"Camboya"},{key:"Camerún",text:"Camerún"},{key:"Canadá",text:"Canadá"},{key:"Chad",text:"Chad"},{key:"Chile",text:"Chile"},{key:"China",text:"China"},{key:"Chipre",text:"Chipre"},{key:"Colombia",text:"Colombia"},{key:"Comoros",text:"Comoros"},{key:"Congo",text:"Congo"},{key:"Corea del Norte",text:"Corea del Norte"},{key:"Corea del Sur",text:"Corea del Sur"},{key:"Costa de Marfil",text:"Costa de Marfil"},{key:"Costa Rica",text:"Costa Rica"},{key:"Croacia",text:"Croacia"},{key:"Cuba",text:"Cuba"},{key:"Darussalam",text:"Darussalam"},{key:"Dinamarca",text:"Dinamarca"},{key:"Djibouti",text:"Djibouti"},{key:"Dominica",text:"Dominica"},{key:"Ecuador",text:"Ecuador"},{key:"Egipto",text:"Egipto"},{key:"El Salvador",text:"El Salvador"},{key:"Em. Arabes Un.",text:"Em. Arabes Un."},{key:"Eritrea",text:"Eritrea"},{key:"Eslovaquia",text:"Eslovaquia"},{key:"Eslovenia",text:"Eslovenia"},{key:"Estados Unidos",text:"Estados Unidos"},{key:"Estonia",text:"Estonia"},{key:"Etiopía",text:"Etiopía"},{key:"Fiji",text:"Fiji"},{key:"Filipinas",text:"Filipinas"},{key:"Finlandia",text:"Finlandia"},{key:"Francia",text:"Francia"},{key:"Gabón",text:"Gabón"},{key:"Gambia",text:"Gambia"},{key:"Georgia",text:"Georgia"},{key:"Ghana",text:"Ghana"},{key:"Gibraltar",text:"Gibraltar"},{key:"Grecia",text:"Grecia"},{key:"Grenada",text:"Grenada"},{key:"Groenlandia",text:"Groenlandia"},{key:"Guadalupe",text:"Guadalupe"},{key:"Guam",text:"Guam"},{key:"Guatemala",text:"Guatemala"},{key:"Guayana Francesa",text:"Guayana Francesa"},{key:"Guinea",text:"Guinea"},{key:"Guinea Ecuatorial",text:"Guinea Ecuatorial"},{key:"Guinea-Bissau",text:"Guinea-Bissau"},{key:"Guyana",text:"Guyana"},{key:"Haití",text:"Haití"},{key:"Holanda",text:"Holanda"},{key:"Honduras",text:"Honduras"},{key:"Hong Kong",text:"Hong Kong"},{key:"Hungría",text:"Hungría"},{key:"Indonesia",text:"Indonesia"},{key:"Irak",text:"Irak"},{key:"Irán",text:"Irán"},{key:"Irlanda",text:"Irlanda"},{key:"Islandia",text:"Islandia"},{key:"Islas Cayman",text:"Islas Cayman"},{key:"Islas Cook",text:"Islas Cook"},{key:"Islas Faroe",text:"Islas Faroe"},{key:"Islas Marianas del Norte",text:"Islas Marianas del Norte"},{key:"Islas Marshall",text:"Islas Marshall"},{key:"Islas Solomon",text:"Islas Solomon"},{key:"Islas Turcas y Caicos",text:"Islas Turcas y Caicos"},{key:"Islas Vírgenes",text:"Islas Vírgenes"},{key:"Islas Wallis y Futuna",text:"Islas Wallis y Futuna"},{key:"Israel",text:"Israel"},{key:"Italia",text:"Italia"},{key:"Jamaica",text:"Jamaica"},{key:"Japón",text:"Japón"},{key:"Jordania",text:"Jordania"},{key:"Kazajstán",text:"Kazajstán"},{key:"Kenya",text:"Kenya"},{key:"Kirguistán",text:"Kirguistán"},{key:"Kiribati",text:"Kiribati"},{key:"Kuwait",text:"Kuwait"},{key:"Laos",text:"Laos"},{key:"Lesotho",text:"Lesotho"},{key:"Letonia",text:"Letonia"},{key:"Líbano",text:"Líbano"},{key:"Liberia",text:"Liberia"},{key:"Libia",text:"Libia"},{key:"Liechtenstein",text:"Liechtenstein"},{key:"Lituania",text:"Lituania"},{key:"Luxemburgo",text:"Luxemburgo"},{key:"Macao",text:"Macao"},{key:"Macedonia",text:"Macedonia"},{key:"Madagascar",text:"Madagascar"},{key:"Malasia",text:"Malasia"},{key:"Malawi",text:"Malawi"},{key:"Mali",text:"Mali"},{key:"Malta",text:"Malta"},{key:"Marruecos",text:"Marruecos"},{key:"Martinica",text:"Martinica"},{key:"Mauricio",text:"Mauricio"},{key:"Mauritania",text:"Mauritania"},{key:"Mayotte",text:"Mayotte"},{key:"México",text:"México"},{key:"Micronesia",text:"Micronesia"},{key:"Moldova",text:"Moldova"},{key:"Mónaco",text:"Mónaco"},{key:"Mongolia",text:"Mongolia"},{key:"Montserrat",text:"Montserrat"},{key:"Mozambique",text:"Mozambique"},{key:"Myanmar",text:"Myanmar"},{key:"Namibia",text:"Namibia"},{key:"Nauru",text:"Nauru"},{key:"Nepal",text:"Nepal"},{key:"Nicaragua",text:"Nicaragua"},{key:"Níger",text:"Níger"},{key:"Nigeria",text:"Nigeria"},{key:"Noruega",text:"Noruega"},{key:"Nueva Caledonia",text:"Nueva Caledonia"},{key:"Nueva Zelandia",text:"Nueva Zelandia"},{key:"Omán",text:"Omán"},{key:"Panamá",text:"Panamá"},{key:"Papua Nueva Guinea",text:"Papua Nueva Guinea"},{key:"Paraguay",text:"Paraguay"},{key:"Perú",text:"Perú"},{key:"Pitcairn",text:"Pitcairn"},{key:"Polinesia Francesa",text:"Polinesia Francesa"},{key:"Polonia",text:"Polonia"},{key:"Portugal",text:"Portugal"},{key:"Puerto Rico",text:"Puerto Rico"},{key:"Qatar",text:"Qatar"},{key:"RD Congo",text:"RD Congo"},{key:"Reino Unido",text:"Reino Unido"},{key:"República Centroafricana",text:"República Centroafricana"},{key:"República Checa",text:"República Checa"},{key:"República Dominicana",text:"República Dominicana"},{key:"Reunión",text:"Reunión"},{key:"Rumania",text:"Rumania"},{key:"Rusia",text:"Rusia"},{key:"Rwanda",text:"Rwanda"},{key:"Sahara Occidental",text:"Sahara Occidental"},{key:"Saint Pierre y Miquelon",text:"Saint Pierre y Miquelon"},{key:"Samoa",text:"Samoa"},{key:"Samoa Americana",text:"Samoa Americana"},{key:"San Cristóbal y Nevis",text:"San Cristóbal y Nevis"},{key:"San Marino",text:"San Marino"},{key:"Santa Elena",text:"Santa Elena"},{key:"Santa Lucía",text:"Santa Lucía"},{key:"Sao Tomé y Príncipe",text:"Sao Tomé y Príncipe"},{key:"Senegal",text:"Senegal"},{key:"Serbia y Montenegro",text:"Serbia y Montenegro"},{key:"Seychelles",text:"Seychelles"},{key:"Sierra Leona",text:"Sierra Leona"},{key:"Singapur",text:"Singapur"},{key:"Siria",text:"Siria"},{key:"Somalia",text:"Somalia"},{key:"Sri Lanka",text:"Sri Lanka"},{key:"Sudáfrica",text:"Sudáfrica"},{key:"Sudán",text:"Sudán"},{key:"Suecia",text:"Suecia"},{key:"Suiza",text:"Suiza"},{key:"Suriname",text:"Suriname"},{key:"Swazilandia",text:"Swazilandia"},{key:"Taiwán",text:"Taiwán"},{key:"Uruguay",text:"Uruguay"}],Qe=a(661);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t,a,n,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Je(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){Ue(o,n,r,i,s,"next",e)}function s(e){Ue(o,n,r,i,s,"throw",e)}i(void 0)}))}}function Ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe={root:{height:70}},$e={childrenGap:20},et=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=Ze(t).call(this,e))||"object"!==Ve(r)&&"function"!=typeof r?We(n):r).handleSubmit=a.handleSubmit.bind(We(a)),a.handleInputChange=a.handleInputChange.bind(We(a)),a.hasErrorFor=a.hasErrorFor.bind(We(a)),a.renderErrorFor=a.renderErrorFor.bind(We(a)),a.updateErrors=a.updateErrors.bind(We(a)),a.state={name:a.props.name,surname:a.props.surname,nationality:He[0],city:ze[0],arrival_year:a.props.arrival_year,age_year:a.props.age_year,feedback:a.props.feedback,dataLoaded:a.props.dataLoaded,errors:[]},a}var a,n,r,o,s,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"handleSubmit",value:(c=Je(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={name:this.state.name,surname:this.state.surname,nationality:this.state.nationality.key,city:this.state.city.key,arrival_year:this.state.arrival_year,age_year:this.state.age_year},this.saveData(je.saveUserData,{code:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"saveData",value:(u=Je(p.a.mark((function e(t){var a,n,r,o,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,a=i.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=i[r];return e.next=4,t.apply(void 0,n);case 4:o=e.sent,this.setState({feedback:o.msg,errors:[]}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&this.updateErrors(e.t0.response.data);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return u.apply(this,arguments)})},{key:"getUserData",value:(s=Je(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,je.getUserData();case 3:e.t1=e.sent,e.t2=function(e){e.response&&t.updateErrors(e.response.data)},e.t0.updateUserState.call(e.t0,e.t1).catch(e.t2);case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"updateUserState",value:(o=Je(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&this.setState({name:t.name,surname:t.surname,nationality:{key:t.nationality,text:t.nationality},city:{key:t.city,text:t.city},arrival_year:t.arrival_year,age_year:t.age_year});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateErrors",value:function(e){this.setState({errors:e.errors,feedback:""})}},{key:"handleInputChange",value:function(e,t){var a,n,r;this.setState((a={},n=e.target.title,r=t,n in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a))}},{key:"hasErrorFor",value:function(e){return!!this.state.errors[e]}},{key:"renderErrorFor",value:function(e){if(this.hasErrorFor(e))return i.a.createElement(L,null,this.state.errors[e][0])}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.feedback?i.a.createElement(A,{styles:{root:{marginBottom:10}}},this.state.feedback):"",this.state.dataLoaded?i.a.createElement(C,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{horizontal:!0,tokens:$e},i.a.createElement(l.a.Item,{grow:!0},i.a.createElement(Ae.a,{label:"Nombre",title:"name",placeholder:"Escribe tu nombre",value:this.state.name,onChange:this.handleInputChange,styles:Xe}),this.renderErrorFor("name"),i.a.createElement(Qe.a,{label:"Tu ciudad",title:"city",selectedKey:this.state.city?this.state.city.key:void 0,onChange:this.handleInputChange,placeholder:"Escoje tu ciudad",options:ze,styles:Xe}),i.a.createElement(Ae.a,{label:"Año de nacimiento",title:"age_year",placeholder:"ej.: 1994",value:this.state.age_year,onChange:this.handleInputChange,styles:Xe}),this.renderErrorFor("age_year")),i.a.createElement(l.a.Item,{grow:!0},i.a.createElement(Ae.a,{label:"Apellido",title:"surname",placeholder:"Escribe tu apellido",value:this.state.surname,onChange:this.handleInputChange,styles:Xe}),this.renderErrorFor("surname"),i.a.createElement(Qe.a,{label:"Nacionalidad",title:"nationality",selectedKey:this.state.nationality?this.state.nationality.key:void 0,onChange:this.handleInputChange,placeholder:"Escoje tu país de origen",options:He,styles:Xe}),i.a.createElement(Ae.a,{label:"Año de llegada a Barcelona",title:"arrival_year",placeholder:"ej.: 2005",value:this.state.arrival_year,onChange:this.handleInputChange,styles:Xe}),this.renderErrorFor("arrival_year"))),i.a.createElement(l.a,{horizontal:!0,horizontalAlign:"space-between",styles:{root:{paddingTop:20}}},i.a.createElement(l.a.Item,null,i.a.createElement(G.a,{text:"Guardar y Publicar",onClick:this.handleSubmit,allowDisabledFocus:!0})))))}}])&&Ke(a.prototype,n),r&&Ke(a,r),t}(i.a.Component);et.defaultProps={name:"",surname:"",nationality:{},city:{},arrival_year:"",age_year:"",feedback:"",dataLoaded:!1},et.propTypes={name:m.a.string,surname:m.a.string,nationality:m.a.object,city:m.a.object,arrival_year:m.a.string,age_year:m.a.string,feedback:m.a.string,dataLoaded:m.a.bool};var tt=et,at=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{title:"Cuéntanos tu experiencia",subtitle:"Puedes escoger cualquiera de las siguientes opciones"}),i.a.createElement(d,null))},nt=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{title:"Mi Historia",subtitle:"Comparte tus experiencias con tu comunidad."}),i.a.createElement(ge,null))},rt=function(){return i.a.createElement(De,null)},ot=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{title:"Mi Datos",subtitle:"Aquí puedes modificar tu información"}),i.a.createElement(tt,null))};function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(Object(a),!0).forEach((function(t){ut(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ct(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=yt(t).call(this,e))||"object"!==it(r)&&"function"!=typeof r?pt(n):r).handleSave=a.handleSave.bind(pt(a)),a.handleEdit=a.handleEdit.bind(pt(a)),a.handleCancleEdit=a.handleCancleEdit.bind(pt(a)),a.handleInputChange=a.handleInputChange.bind(pt(a)),a.deleteQuestion=a.deleteQuestion.bind(pt(a)),a.editQuestion=a.editQuestion.bind(pt(a)),a.state={questionsList:a.props.questionsList,question:a.props.question,editedBody:a.props.editedBody,editMode:a.props.editMode,editSelectedQuestion:a.props.editSelectedQuestion,errors:[]},a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/preguntas").then((function(t){console.log(t),e.setState({questionsList:t.data})})).catch((function(t){e.setState({errors:t.response.data.errors})}))}},{key:"handleSave",value:function(e){var t=this;e.preventDefault();var a={body:this.state.question};b.a.post("/api/backend/questions/add",a).then((function(e){t.setState({question:"",questionsList:[].concat(ct(t.state.questionsList),[lt({},a,{id:e.data.result})])})}))}},{key:"handleEdit",value:function(){var e=this,t={id:this.state.editSelectedQuestion.id,body:this.state.editedBody};b.a.post("/api/backend/questions/edit",t).then((function(t){if(t.data){var a=e.state.questionsList.filter((function(t){return t.id===e.state.editSelectedQuestion.id&&(t.body=e.state.editedBody),t}));e.setState({questionsList:a}),e.handleCancleEdit()}}))}},{key:"handleCancleEdit",value:function(){this.setState({editedBody:"",editMode:!1,editSelectedQuestion:{}})}},{key:"deleteQuestion",value:function(e){var t=this,a={id:e};b.a.post("/api/backend/questions/delete",a).then((function(e){if(e.data){var n=t.state.questionsList.filter((function(e){return e.id!==a.id}));t.setState({questionsList:n})}}))}},{key:"editQuestion",value:function(e){this.state.editSelectedQuestion.id!==e.id&&this.setState({editMode:!0,editSelectedQuestion:e,editedBody:e.body})}},{key:"handleInputChange",value:function(e){this.setState(ut({},event.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"card-body"},0===this.state.questionsList.length?"No hay preguntas":this.state.questionsList.map((function(t){return i.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center",key:t.id},i.a.createElement("span",{className:"qitem_".concat(t.id)},t.body),i.a.createElement("div",{className:"right"},i.a.createElement("button",{onClick:function(){return e.deleteQuestion(t.id)},className:"btn btn-sm btn-light"},"Delete"),i.a.createElement("button",{onClick:function(){return e.editQuestion(t)},className:"btn btn-sm btn-light"},"Edit")))}))),i.a.createElement("div",{className:"card-footer"},this.state.editMode?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("small",{id:"editedBodyHelp",className:"form-text text-muted"},this.state.editSelectedQuestion.body),i.a.createElement("br",null)),i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Edita tu pregunta",onChange:this.handleInputChange,value:this.state.editedBody,name:"editedBody","aria-describedby":"editedBodyHelp"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{onClick:this.handleCancleEdit,className:"btn btn-secondary"},"Cancel"),i.a.createElement("button",{onClick:this.handleEdit,className:"btn btn-success"},"Guardar")))):i.a.createElement("form",null,i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Escribe nueva pregunta",onChange:this.handleInputChange,value:this.state.question,name:"question"}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{onClick:this.handleSave,className:"btn btn-success",type:"submit"},"Añadir"))))))}}])&&dt(a.prototype,n),r&&dt(a,r),t}(i.a.Component);mt.defaultProps={question:"",editedBody:"",editSelectedQuestion:{},editMode:!1,questionsList:[]},mt.propTypes={question:m.a.string,editedBody:m.a.string,editSelectedQuestion:m.a.object,editMode:m.a.bool,questionsList:m.a.array};var ft=mt;function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var St=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=xt(t).call(this,e))||"object"!==bt(r)&&"function"!=typeof r?gt(n):r).state={usersList:a.props.usersList,errors:[]},a.toggleSwitch=a.toggleSwitch.bind(gt(a)),a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){var e=this;b.a.post("/api/backend/users").then((function(t){e.setState({usersList:t.data})})).catch((function(t){e.setState({errors:t.response.data.errors})}))}},{key:"toggleSwitch",value:function(e,t){var a=this,n=this.state.usersList.filter((function(t){return t.id===e&&(t.active=Number(!t.active)),t})),r={active:!t,id:e};b.a.post("/api/backend/users/toggleactive",r).then((function(e){e.data.result&&a.setState({usersList:n})}))}},{key:"render",value:function(){var e=this;return i.a.createElement("table",{className:"table table-striped table-hover table-sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"id"),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email Address"),i.a.createElement("th",null,"last Login"),i.a.createElement("th",null,"Login IP"),i.a.createElement("th",null,"Admin"),i.a.createElement("th",null,"Active"),i.a.createElement("th",null,"Created"))),i.a.createElement("tbody",null,this.state.usersList.map((function(t,a){return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,t.id),i.a.createElement("td",null,t.name),i.a.createElement("td",null,t.email),i.a.createElement("td",null,t.last_login_at),i.a.createElement("td",null,t.last_login_ip),i.a.createElement("td",null,e.state.usersList[a].admin?"Yes":"No"),i.a.createElement("td",null,i.a.createElement("input",{className:"form-check-input",type:"checkbox",disabled:a?"":"disabled",checked:e.state.usersList[a].active?"checked":"",onChange:function(){return e.toggleSwitch(t.id,e.state.usersList[a].active)}})),i.a.createElement("td",null,t.created_at))}))))}}])&&kt(a.prototype,n),r&&kt(a,r),t}(i.a.Component);St.defaultProps={usersList:[]},St.propTypes={usersList:m.a.array};var Et=St;function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=new(function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=wt(this,Pt(t).call(this));var a=new r.a.ContainerBuilder;return a.register(at).as("homepage"),a.register(nt).as("story"),a.register(rt).as("interview"),a.register(ot).as("settings"),a.register(ft).as("backend_questions"),a.register(Et).as("users"),e.setContainer(a.build()),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,e),t}(r.a.Bootstrapper));window.updateHabitat=jt.update.bind(jt);t.default=jt}},[[305,1,2]]]);